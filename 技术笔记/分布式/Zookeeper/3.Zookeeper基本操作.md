# Zookeeper基本操作

Zookeeper默认端口是2181

- ##### 命令行操作

- ##### API操作-Java

- 

## 命令行操作

### 连接Zookeeper服务器

进入/bin目录

连接本地Zookeeper服务器，执行命令

```shell
sh zkCli.sh
```

连接指定Zookeeper服务器，执行命令

```shell
sh zkCli.sh -server ip:port
```

### 创建节点

- ##### create命令

创建Zookeeper节点

```shell
create [-s] [-e] path data acl
```

-s，-e ：指定节点属性，-s顺序节点，-e临时节点，默认不带参数为持久节点；

path：节点路径及节点；

data：节点数据内容；

acl：权限控制，缺省下，不做任何权限控制。

例子：

```shell
create /zk-book 123
```

在根节点下创建了/zk-book节点，节点数据内容为123。

### 读取节点

- ##### ls命令

- ##### set命令

#### ls命令

可以列出Zookeeper指定节点下的所有子节点（第一级）

```shell
ls path [watch]
```

path：指定数据节点的节点路径；

#### get命令

可以获取Zokkeeper指定节点的数据内容和属性信息。

```shell
get path [watch]
```

### 更新节点

- set命令

set命令可以更新指定节点的数据内容。

```shell
set patch data [version]
```

version：表示数据版本

### 删除节点

- ##### delete命令

delete命令，可以删除Zookeeper上指定节点。

```shell
delete path [version]
```

delete无法删除一个包含子节点的节点。



## API操作-Java

### 创建会话

Zookeeper提供4种构造方法，来创建Zookeeper实例

```java
1. Zookeeper(String connectString, int sessionTimeout, Watcher watcher);

2. Zookeeper(String connectString, int sessionTimeout, Watcher watcher, boolean canBeReadOnly);

3. Zookeeper(String connectString, int sessionTimeout, Watcher watcher, long sessionId, byte[] sessionPasswd);

4. Zookeeper(String connectString, int sessionTimeout, Watcher watcher, long sessionId, byte[] sessionPasswd, boolean canBeReadOnly);
```

参数说明

- **connectString**：服务器列表
- **sessionTimeout**：超时时间
- **watcher**
- **canBeReadOnly**
- **sessionPasswd**