## 1、Hibernate查询报错：could not execute native bulk mainpulation query

```

```

## 2、layer.confirm存在重复提交问题！

```
解决：设置“锁”；
```

## 3、Mybatis使用truncate

```sql
  <update id="truncateTable" >
    TRUNCATE TABLE 表名
  </update>
```

## 4、Mybatis调用存储过程

```sql
<select id="findUserByProc" parameterType="java.lang.String" statementType="CALLABLE" 
    resultType="com.mybatis.entity.User">
    {call proc_queryUser(#{user_name,jdbcType=VARCHAR,mode=IN})}
</select>
```

## 5、Oracle NVL函数

NVL函数: NVL函数是将NULL值的字段转换成默认字段输出。

格式，NVL(expr1,expr2)：expr1,需要转换的字段名或者表达式；expr2,null的替代值；

```sql
select nvl(name,'noname') from table;
```

## 6、Mybatis批量插入

- #### Oracle （要注意的是：useGeneratedKeys="false" ）
  
  方式1：oracle批量插入使用 insert all into table(...) values(...) into table(...) values(...) select 1 from dual; 
  
  ```sql
  <insert id="insertListBatch" parameterType="java.util.List" useGeneratedKeys="false">
          INSERT ALL
          <foreach item="item" index="index" collection="list">
          INTO student
          (
              ID,
              name,
              age,
              sex,
              CREATE_TIME
          ) VALUES
          (
              #{item.id, jdbcType=NUMERIC},
              #{item.name, jdbcType=VARCHAR},
              #{item.age, jdbcType=VARCHAR},
              #{item.sex, jdbcType=VARCHAR},
              #{item.createdTime, jdbcType=NUMERIC} 
          )
          </foreach>
          SELECT 1 FROM DUAL
      </insert>
  ```
  
  方式2： insert into table(...) (select ... from dual) union all (select ... from dual)
  
  ```sql
  <insert id="insertListBatch" parameterType="java.util.List" useGeneratedKeys="false">
          INSERT INTO T_APPLAUD
          (
              ID,
              name,
              age,
              sex,
              CREATE_TIME
          )
          <foreach item="item" index="index" collection="list" separator="union all">
          (
              SELECT 
                  #{item.id},
                  #{item.name},
                  #{item.age},
                  #{item.sex},
                  #{item.createdTime} 
              FROM DUAL
          )
          </foreach>
      </insert>
  ```

- ###### Mysql
  
  ```sql
  <insert id="insertListBatch" >
      insert into student ( id,name,age,sex,createdTime ) values 　
      <foreach collection="list" item="item" index="index" separator=","> 　　　　　
      (null,#{item.name},#{item.age},#{item.sex},#{item.createdTime}
  　　 </foreach>
  </insert>
  ```
