### 1、财资系统采用Vue+SpringCloud微服务技术架构

其中使用Eureka作为服务注册中心，使用RabbitMQ作为消息队列组件，使用Zipkin进行服务链路跟踪，使用Hysrix Turbine进行服务监控，使用jenkins进行项目的CIDI自动化部署，使用Spring Boot Admin进行服务监控；



### 2、财资系统是跟据业务功能做的服务拆分，分为基础服务中心、管控中心、结算中心、报表中心、采购中心、账户中心等15个中心

其中基础服务中心主要是提供系统的基础功能，例如审批流程系统，第三方单点登录系统，验证签名系统等；

结算中心：主要是提供公司的对公对私的付款转账、工资发放、资金划拨等功能；

报表中心：主要是提供集团下公司账户及财务报表，集团账户余额管理查看功能；

采购中心：主要是对集团及其子公司对采购项目的汇总和管理；

账户中心：主要是对集团及其子公司所属的公有账户进行管理和维护；

管控中心：是集团管理员用户对于集团内部该系统的操作权限的管理，例如审批人的设置，财资系统功能操作权限的设置等等；



### 3、 财资系统是从传统单体微服务迁移至微服务平台，保留了老系统的部分功能，如登录后系统首页信息的加载等，在系统中微服务接口统一由网关管理

大概的整体流程：登陆后获取用户信息保存至session中并同步信息至微服务网关，点击系统菜单获取到url，经由网关调用获取微服务接口获取信息并跳转；



### 4、该系统使用的是单体oracle数据库，各个中心根据不同的数据库用户来维护各自的表；功能信息如：用户信息，权限信息都统一由基础服务中心提供；



### 5、智能批量付款

##### 项目描述：

智能批量付款是结算中心下面的一个子功能模块，支持文件导入和手工录入方式进行数据的录入，主要的功能是提供对公对私进行一个批量转账的功能，集团系统用户可以通过此功能进行工资的发放和对其他集团进行财务的清算；

##### 项目开发细节：

对智能批量付款进行了一共两期的维护和开发，

第一期，是对老系统功能的迁移，而且对表结构进行了重新的设计（由原来的单表拆分为一张主流水表与一张子流水表），整体代码及相关流程还是保留了原来的内容；

##### 第一期出现的问题：

1.在执行文件导入时，采用同步等待方式，而且解析过程中会去校验数据的正确性，此外vue调用接口会经过网关，从而会导致调用接口超时，就仅仅支持100笔的单据导入，严重影响用户体验；

2.由于SpringBoot机制的原因且没有对上传的临时文件作单独目录的保存，SpringBoot会定期把项目中生成的临时文件夹清除，导致过一段时间会出现临时文件夹不存在的问题；

3.在文件导入的时候使用的是jxl文件解析包，对文件进行逐行的解析，也是非常影响性能的；

4.审批通过后，发生实质性资金流转，同样也是采用同步等待的方式等待每一笔交易的结果的返回和处理，也是体验非常的糟糕；

### 针对第一期出现的这些问题，第二期对该功能进行了一次较大的改造，具体内容有：

1.针对文件导入效率低问题，首先将同步等待方式改由异步调用方式（Spring线程池），然后可以在列表页面查看文件导入状态；其次对于文件解析jxl包性能问题改由使用EasyExcel框架将excel文件解析为List对象数组，大大提高了文件解析速度，最后对于调用接口去查询数据的正确性，优化了整体数据校验流程，将主要字段的非空校验和格式进行提前校验，优化必需接口的查询效率，减少一些接口不必要的调用；通过优化，不仅解决了导入笔数的限制，而且还极大地提高了解析速度，经测试一期1分钟只能解析100笔，优化后30s能完成2000笔单据解析；

2.针对于发交易同步等待返回结果问题，同样也是采用“异步线程池+xxljob定时任务”的方式实现效率的提升，和交易异常状态的监控处理；

## Star 法则

S：情景，项目背景，为什么要做；

T：目标，明确任务，大项目->自任务，项目调研，合理

A：行动，具体项目细节，项目难点；

R：结果，项目产生的结果，具体数值；

可以补充项目规划





## star法则优化项目介绍

- ## 整体项目介绍

在2018年中，公司决定对现有财资平台系统进行架构升级，以满足日益增长的客户及业务的功能需求；

经过半年之久的研究和商讨之后，选择了SpringCloud这一开源且成熟的微服务框架体系作为升级的架构，

在2019年3月初，随着APP二期项目的进行，就将系统核心功能“审批流程”及负责资金交易相关的功能迁移至为微服务，

根据业务划分，构建了两个后端微服务项目：基础业务能力中心和结算中心，及一个前端基于vue的服务。

在2019年7月到2020年8月期间，独立完成了结算中心系统批量付款功能的一期和二期项目的开发维护工作。

在完成批量付款二期上线后，便去往基础业务能力中心，进行对接其他开发中心系统的接口开发，和

- ## 批量付款项目介绍













